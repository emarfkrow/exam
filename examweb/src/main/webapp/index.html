<style type="text/css">

.article h1 {
    background-color: #4682b4;
    border-bottom: 2px #d2b48c solid;
    border-right: 2px #d2b48c solid;
    color: #f5f5f5;
    font-weight: normal;
    padding-left: 0.5em;
    margin-top: 0px;
}

.article pre {
    background-color: #fff;
    border: 1px #ccc solid;
    font-family: monospace;
    font-size: small;
    padding: 0.5em;
}

.article dt {
    border-bottom: 1px #d2b48c solid;
    margin-top: 0.5em;
    padding-left: 0.5em;
}

.article dd dd dt {
    border-style: none;
    margin-top: 1em;
    padding-left: 0px;
}

</style>
    <section>
      <h1>
        関連情報
      </h1>
      <p>主キー・外部キーで、関連するモデルを管理します。</p>
      <dl>
        <dt>親子モデル</dt>
        <dd>最終キー以外の主キーが合致する</dd>
        <dd>
          <pre>

■親モデル              ■子モデル
┏━━━━━┓          ┌─────┐
┃親ID      ┃─────│親ID      │
┃----------┃          │子連番    │
┃親名      ┃          │----------│
┗━━━━━┛          │子名      │
                        └─────┘
</pre>
        </dd>
      </dl>
      <dl>
        <dt>兄弟モデル</dt>
        <dd>同一の主キーを持つ</dd>
        <dd>
          <pre>

■子モデル              ■兄弟モデル
┌─────┐          ┏━━━━━┓
│親ID      │───┬─┃親ID      ┃
│子連番    │──┬┼─┃子連番    ┃
│----------│    ││  ┃----------┃
│子名      │    ││  ┃兄弟１名  ┃
└─────┘    ││  ┗━━━━━┛
                  ││  ┏━━━━━┓
                  │└─┃親ID      ┃
                  └──┃子連番    ┃
                        ┃----------┃
                        ┃兄弟２名  ┃
                        ┗━━━━━┛
</pre>
        </dd>
      </dl>
      <dl>
        <dt>履歴モデル</dt>
        <dd>モデルの主キーに採番キーを一つ加え、主キー以外の項目が一致する</dd>
        <dd>履歴モデル名は子モデル名に前方一致する</dd>
        <dd>
          <pre>

■子モデル              ■履歴モデル
┌─────┐          ┏━━━━━┓
│親ID      │─────┃親ID      ┃
│子連番    │─────┃子連番    ┃
│----------│          ┃履歴連番  ┃
│子名      │          ┃----------┃
└─────┘          ┃子名      ┃
                        ┗━━━━━┛
</pre>
        </dd>
      </dl>
      <dl>
        <dt>参照モデル</dt>
        <dd>参照判定用の「キーサフィックス：値サフィックス」に該当するモデルを、外部キーで参照する</dd>
        <dd>（再帰モデル）自エンティティの主キーを外部キーとするモデル。</dd>
        <dd>
          <pre>

■子モデル              ■参照モデル            ■再帰モデル
┌─────┐          ┏━━━━━┓          ┏━━━━━┓
│親ID      │    ┌──┃参照ID    ┃          ┃再帰ID    ┃─┐
│子連番    │    │    ┃----------┃          ┃----------┃  │
│----------│    │    ┃参照名    ┃          ┃再帰名    ┃  │
│子名      │    │    ┗━━━━━┛          ┃親再帰ID  ┃─┘
│参照ID    │──┘                            ┗━━━━━┛
└─────┘
</pre>
        </dd>
      </dl>
      <dl>
        <dt>転生モデル</dt>
        <dd>外部キーが必須項目であり、他のテーブルには存在しない</dd>
        <dd>
          <pre>

■転生元モデル          ■転生先モデル
┌─────┐          ┏━━━━━┓
│転生元ID  │──┐    ┃転生先ID  ┃
│----------│    │    ┃----------┃
│転生元名  │    │    ┃転生先名  ┃
└─────┘    └──┃転生元ID  ┃
                        ┗━━━━━┛
</pre>
        </dd>
      </dl>
      <dl>
        <dt>派生モデル</dt>
        <dd>外部キーが必須項目であり、他のテーブルにも存在する</dd>
        <dd>
          <pre>

■派生元モデル          ■派生先モデル
┌─────┐          ┏━━━━━┓
│派生元ID  │──┐    ┃派生先１ID┃
│----------│    │    ┃----------┃
│派生元名  │    │    ┃派生先１名┃
└─────┘    ├──┃派生元ID  ┃
                  │    ┗━━━━━┛
                  │    ┏━━━━━┓
                  │    ┃派生先２ID┃
                  │    ┃----------┃
                  │    ┃派生先２名┃
                  └──┃派生元ID  ┃
                        ┗━━━━━┛
</pre>
        </dd>
      </dl>
      <dl>
        <dt>集約モデル</dt>
        <dd>外部キーが必須項目でなく、集約先となるモデルが１つしかない。</dd>
        <dd>
          <pre>

■集約先モデル          ■集約元モデル
┏━━━━━┓          ┌─────┐
┃集約先ID  ┃──┐    │集約元ID  │
┃----------┃    │    │----------│
┃集約先名  ┃    │    │集約元名  │
┗━━━━━┛    ├──│集約先ID  │
                  │    └─────┘
              ×─┘
</pre>
        </dd>
      </dl>
      <dl>
        <dt>複合モデル</dt>
        <dd>２以上のテーブルの主キーのうち、一致個数が最大となる主キーを組み合わせて、複合モデルの主キーとする</dd>
        <dd>
          <pre>

■複合元モデル          ■複合モデル
┌─────┐          ┏━━━━━┓
│複合元１ID│─────┃複合元１ID┃
│----------│    ┌──┃複合元２ID┃
│複合元１名│    │┌─┃複合元連番┃
└─────┘    ││  ┃----------┃
                  ││  ┃複合先名  ┃
┌─────┐    ││  ┗━━━━━┛
│複合元２ID│×  ││
│----------│    ││
│複合元２名│    ││
└─────┘    ││
                  ││
┌─────┐    ││
│複合元２ID│──┘│
│複合元連番│───┘
│----------│
│複合元２名│
└─────┘
</pre>
        </dd>
      </dl>
    </section>
